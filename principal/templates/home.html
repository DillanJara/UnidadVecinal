{% extends 'layouts/base.html' %}

{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'styles/home.css' %}">
{% endblock %}

{% block title %}
<title>Unidad Vecinal</title>
{% endblock %}

{% block content %}

<!-- banner section start -->
<section id="banner">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <p class="banner-title">SOMOS LA MEJOR OPCIÓN <br>
                    PARA TU JUNTA DE VECINOS</p>
                <p>Nuestra aplicación web es una herramienta de gestión comunitaria diseñada para fortalecer la
                    colaboración y comunicación en las unidades territoriales. <br> <br>Facilitamos el acceso y la
                    participación
                    de los habitantes y miembros de la junta de vecinos en una amplia gama de actividades y trámites.
                </p>
                <a type="button" class="btn-banner" href="{% url 'registrarJuntaVecinos' %}">Comienza Ahora</a>
            </div>
            <div class="col-md-6 text-center">
                <img src="{% static 'img/home2.png' %}" class="img-home">
            </div>
        </div>
    </div>
    <img src="{% static 'img/wave1.png' %}" class="bottom-img">
</section>
<!-- banner section end -->

<!-- Servicios section start -->
<section id="servicios">
    <div class="container text-center">
        <div class="row">
            <h1 class="titulo-servicios">Algunas De Nuestras Funcionalidades</h1>
            <div class="col-md-4 servicios">
                <img src="{% static 'img/proyecto.png' %}" class="img-servicio">
                <h4>Postula Proyectos</h4>
                <p>Postula proyectos directamente a la junta de vecinos.
                    Simplificamos el proceso para que puedas presentar tus iniciativas de mejora comunitaria de manera
                    rápida y eficiente.
                </p>
            </div>
            <div class="col-md-4 servicios">
                <img src="{% static 'img/certificados.png' %}" class="img-servicio">
                <h4>Obten Certificados en Línea</h4>
                <p>Te ofrecemos la comodidad de obtener certificados en línea de manera rápida y eficiente.
                    <br>
                    Facilitamos el proceso para que puedas adquirir la documentación que necesitas sin salir de casa.
                </p>
            </div>
            <div class="col-md-4 servicios">
                <img src="{% static 'img/calendario.png' %}" class="img-servicio">
                <h4>Reserva Espacios</h4>
                <p>Puedes realizar fácilmente reservas de espacios comunitarios.
                    <br>
                    Desde salones para eventos hasta áreas recreativas, te ofrecemos la capacidad de asegurar tu espacio
                    deseado con solo unos clics
                </p>
            </div>
        </div>
    </div>
</section>
<!-- servicios section end -->

<!-- responsivo section start -->
<section id="responsivo"
    style="background-color: #ebebeb; padding-top: 50px; padding-bottom: 60px; margin-bottom: 50px;">
    <div class="container" <h1 class="responsivo-titulo">
        </h1>
        <div class="row">
            <div class="col-md-4 text-center">
                <h1 class="texto-responsivo">Diseño Responsivo</h1>
                <div class="linea-azul"></div>
                <div class="text-start">
                    <p style="margin-bottom: 50px;">
                        Puedes acceder a ella desde cualquier dispositivo, lo que
                        significa que siempre tendrás la misma experiencia genial sin importar dónde estés o qué
                        dispositivo
                        estés usando. <br> <br>
                        Podrás organizar y gestionar los espacios comunes, planificar actividades, proponer
                        proyectos para mejorar el vecindario, realizar el pago de cuotas sociales de manera sencilla y
                        hasta crear noticias para mantener a todos informados
                    </p>
                </div>
            </div>
            <div class="col-md-1"></div>
            <div class="col-md-7">
                <img src="{% static 'img/responsivo.png' %}" class="img-fluid img-responsivo">
            </div>
        </div>
    </div>
</section>
<!-- responsivo section end -->

<!-- validar certificado section start -->
<section id="validar-certificado">
    <div class="container">
        <h1 class="titulo-verificar-cert text-center">Verificación de Certificado</h1>
        <br>
        <br>
        <br>
        <div class="row g-3">
            <div class="col-sm-6">
                <div class="input-group">
                    <input type="number" id="rut" class="form-control" placeholder="Rut" style="width: max-content;"
                        maxlength="99999999" minlength="1">
                    <span class="input-group-text">-</span>
                    <input placeholder="Dv" type="text" class="form-control">
                </div>
            </div>
            <div class="col-sm-4">
                <input type="number" id="nroSolicitud" class="form-control" placeholder="N° de Solicitud" minlength="1">
            </div>
            <div class="col-sm-2">
                <button id="validarCertificado" class="btn-validar-certificado">Validar</button>
            </div>
        </div>
        <br>
        <br>
    </div>
</section>
<!-- validar certificado section end -->



<script>

    document.getElementById('validarCertificado').onclick = validarCertificado;

    function validarCertificado() {
        let rut = document.getElementById('rut').value;
        let nroSolicitud = document.getElementById('nroSolicitud').value;
        fetch('http://127.0.0.1:8000/api/validarCertificado/' + nroSolicitud + '/' + rut)
            .then(response => {
                if (!response.ok) {
                    throw Error(response.statusText);
                }
                return response.json();
            })
            .then(responseAsJson => {
                Swal.fire({
                    title: "Enhorabuena!",
                    footer: "El documento ha sido validado correctamente",
                    icon: "success",
                    html: "<table class='table table-striped'>" +
                        "<tr>" +
                        "<td>N° Solicitud</td>" +
                        "<td>" + responseAsJson.sol_cer_id + "</td>" +
                        "</tr>" +
                        "<tr>" +
                        "<td>Rut</td>" +
                        "<td>" + responseAsJson.miembro_mie.mie_rut + "-" + responseAsJson.miembro_mie.mie_dv + "</td>" +
                        "</tr>" +
                        "<tr>" +
                        "<td>Nombre</td>" +
                        "<td>" + responseAsJson.miembro_mie.mie_nombre + " " + responseAsJson.miembro_mie.mie_ap_paterno + " " + responseAsJson.miembro_mie.mie_ap_materno + "</td>" +
                        "</tr>" +
                        "<tr>" +
                        "<td>Documento</td>" +
                        "<td>" + responseAsJson.certificado_cer.cer_nombre + "</td>" +
                        "</tr>" +
                        "</table>"
                });
            })
            .catch(error => {
                Swal.fire({
                    icon: "error",
                    title: "Oops...",
                    text: "Lamentablamente el documento ingresado no ha sido emitido desde nuestra aplicacion",
                });
            });
    }
</script>
{% endblock %}